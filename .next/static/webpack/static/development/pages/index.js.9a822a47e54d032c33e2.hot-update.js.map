{"version":3,"file":"static/webpack/static/development/pages/index.js.9a822a47e54d032c33e2.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport posed from 'react-pose'\nimport { distanceTo } from 'geolocation-utils'\nimport _ from 'lodash'\nimport firebase from 'firebase'\nimport 'firebase/auth'\nimport base from '../rebase'\n\nimport ProfileFeed from '../components/ProfileFeed'\nimport AppBar from '../components/AppBar'\nimport Splash from '../components/Splash'\n\nconst AppWrapper = styled.div`\n  font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;\n`;\n\nvar provider = new firebase.auth.FacebookAuthProvider();\nprovider.addScope('user_birthday')\nprovider.addScope('default')\nprovider.addScope('user_gender')\n\nclass Index extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      profiles: [],\n      user: {},\n      isAuthed: false,\n    }\n  }\n\n  componentDidMount() {\n    if (navigator) {\n      navigator.geolocation.getCurrentPosition(function(position) {\n        this.loadProfiles(position.coords.latitude, position.coords.longitude);\n      }.bind(this))\n    } else {\n      alert('location disabled')\n    }\n  }\n\n  loadProfiles(lat, lng) {\n    const userLocation = {\n      lat,\n      lng\n    }\n    const data = [\n      {\n        id: '23sdfa4qgsfd',\n        name: 'Emma',\n        age: 22,\n        lat: 44.703664811708066,\n        lng: -63.5526466369629,\n        photos: [\n          \"https://images.unsplash.com/photo-1504703395950-b89145a5425b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\",\n          \"https://images.unsplash.com/photo-1520466809213-7b9a56adcd45?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"\n        ]\n      },\n      {\n        id: '243tregdfgwsd',\n        name: 'Fiona',\n        age: 20,\n        lat: 44.689323988750424,\n        lng: -63.56305193156005,\n        photos: [\n          \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"\n        ]\n      },\n      {\n        id: '46756edhgfgh4',\n        name: 'Kelly',\n        age: 26,\n        lat: 44.689323988750424,\n        lng: -63.56305193156005,\n        photos: [\n          \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"\n        ]\n      },\n    ]\n    let profiles = []\n    _.forEach(data, function(value) {\n      const location = {\n        lat: value.lat,\n        lng: value.lng\n      }\n      console.log(location);\n      const profile = {\n        id: value.id,\n        name: value.name,\n        age: value.age,\n        photos: value.photos,\n        distance: distanceTo(userLocation, location)\n      }\n      profiles.push(profile)\n    })\n    if (profiles.length === data.length) {\n      this.setState({\n        profiles\n      })\n    }\n  }\n\n  handleLike(id, index) {\n    let {profiles} = this.state\n    profiles.splice(index, 1)\n    console.log(profiles);\n    this.setState({\n      profiles\n    })\n  }\n\n  handleAuth() {\n  firebase.auth().signInWithPopup(provider).then(function(result) {\n    // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n    var token = result.credential.accessToken;\n    // The signed-in user info.\n    var user = result.user;\n    console.log(user);\n    // ...\n  }).catch(function(error) {\n    // Handle Errors here.\n    console.log(error);\n    var errorCode = error.code;\n    var errorMessage = error.message;\n    // The email of the user's account used.\n    var email = error.email;\n    // The firebase.auth.AuthCredential type that was used.\n    var credential = error.credential;\n    // ...\n  });\n  }\n\n  render() {\n    return (\n      <AppWrapper>\n        {this.state.isAuthed\n          ?\n          <React.Fragment>\n            <AppBar />\n            <ProfileFeed profiles={this.state.profiles} handleLike={(id, index) => this.handleLike(id, index)} />\n          </React.Fragment>\n          :\n          <Splash handleAuth={() => this.handleAuth()}/>\n        }\n      </AppWrapper>\n    );\n  }\n\n}\n\nexport default Index;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAYA;AACA;AACA;AACA;AACA;AACA;AANA;AAWA;AACA;AACA;AACA;AACA;AACA;AANA;AAWA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;;;AAEA;AAAA;AAEA;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AA7HA;AACA;AAgIA;;;;A","sourceRoot":""}