{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport posed from 'react-pose';\nimport { distanceTo } from 'geolocation-utils';\nimport _ from 'lodash';\nimport firebase from 'firebase';\nimport 'firebase/auth';\nimport base from '../rebase';\nimport AppBar from '../components/AppBar';\nvar AppWrapper = styled.div.withConfig({\n  displayName: \"pages__AppWrapper\",\n  componentId: \"sc-1wbo52z-0\"\n})([\"font-family:-apple-system,BlinkMacSystemFont,\\\"Segoe UI\\\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\\\"Helvetica Neue\\\",sans-serif;\"]);\nvar provider = new firebase.auth.FacebookAuthProvider();\nprovider.addScope('user_birthday');\nprovider.addScope('default');\nprovider.addScope('user_gender');\n\nvar Index =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Index, _Component);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, props));\n    _this.state = {\n      profiles: [],\n      user: {},\n      isAuthed: true\n    };\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (navigator) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          this.loadProfiles(position.coords.latitude, position.coords.longitude);\n        }.bind(this));\n      } else {\n        alert('location disabled');\n      }\n    }\n  }, {\n    key: \"loadProfiles\",\n    value: function loadProfiles(lat, lng) {\n      var userLocation = {\n        lat: lat,\n        lng: lng\n      };\n      var data = [{\n        id: '23sdfa4qgsfd',\n        name: 'Emma',\n        age: 22,\n        lat: 44.703664811708066,\n        lng: -63.5526466369629,\n        photos: [\"https://images.unsplash.com/photo-1504703395950-b89145a5425b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\", \"https://images.unsplash.com/photo-1520466809213-7b9a56adcd45?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"]\n      }, {\n        id: '243tregdfgwsd',\n        name: 'Fiona',\n        age: 20,\n        lat: 44.689323988750424,\n        lng: -63.56305193156005,\n        photos: [\"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"]\n      }, {\n        id: '46756edhgfgh4',\n        name: 'Kelly',\n        age: 26,\n        lat: 44.689323988750424,\n        lng: -63.56305193156005,\n        photos: [\"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"]\n      }];\n      var profiles = [];\n\n      _.forEach(data, function (value) {\n        var location = {\n          lat: value.lat,\n          lng: value.lng\n        };\n        console.log(location);\n        var profile = {\n          id: value.id,\n          name: value.name,\n          age: value.age,\n          photos: value.photos,\n          distance: distanceTo(userLocation, location)\n        };\n        profiles.push(profile);\n      });\n\n      if (profiles.length === data.length) {\n        this.setState({\n          profiles: profiles\n        });\n      }\n    }\n  }, {\n    key: \"handleLike\",\n    value: function handleLike(id, index) {\n      var profiles = this.state.profiles;\n      profiles.splice(index, 1);\n      console.log(profiles);\n      this.setState({\n        profiles: profiles\n      });\n    }\n  }, {\n    key: \"handleAuth\",\n    value: function handleAuth() {\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n        var token = result.credential.accessToken; // The signed-in user info.\n\n        var user = result.user;\n        console.log(user); // ...\n      }).catch(function (error) {\n        // Handle Errors here.\n        console.log(error);\n        var errorCode = error.code;\n        var errorMessage = error.message; // The email of the user's account used.\n\n        var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n        var credential = error.credential; // ...\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(AppWrapper, null, \"Test\");\n    }\n  }]);\n\n  return Index;\n}(Component);\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}