{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport posed from 'react-pose';\nimport { distanceTo } from 'geolocation-utils';\nimport _ from 'lodash';\nimport firebase from 'firebase';\nimport 'firebase/auth';\nimport base from '../rebase';\nimport moment from 'moment';\nimport AppBar from '../components/AppBar';\nvar AppWrapper = styled.div.withConfig({\n  displayName: \"pages__AppWrapper\",\n  componentId: \"sc-1wbo52z-0\"\n})([\"font-family:-apple-system,BlinkMacSystemFont,\\\"Segoe UI\\\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\\\"Helvetica Neue\\\",sans-serif;\"]);\nvar provider = new firebase.auth.FacebookAuthProvider();\nprovider.addScope('user_birthday');\nprovider.addScope('default');\nprovider.addScope('user_gender');\n\nvar Index =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Index, _Component);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, props));\n    _this.state = {\n      profiles: [],\n      user: {},\n      isAuthed: true\n    };\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (navigator) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          this.processProfiles(position.coords.latitude, position.coords.longitude);\n        }.bind(this));\n      } else {\n        alert('location disabled');\n      }\n    }\n  }, {\n    key: \"processProfiles\",\n    value: function processProfiles(lat, lng) {\n      var userLocation = {\n        lat: lat,\n        lng: lng\n      };\n      var data = [{\n        id: '23sdfa4qgsfd',\n        name: 'Emma',\n        age: 22,\n        lat: 44.703664811708066,\n        lng: -63.5526466369629,\n        photos: [\"https://images.unsplash.com/photo-1504703395950-b89145a5425b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\", \"https://images.unsplash.com/photo-1520466809213-7b9a56adcd45?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"]\n      }, {\n        id: '243tregdfgwsd',\n        name: 'Fiona',\n        age: 20,\n        lat: 44.689323988750424,\n        lng: -63.56305193156005,\n        photos: [\"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"]\n      }, {\n        id: '46756edhgfgh4',\n        name: 'Kelly',\n        age: 26,\n        lat: 44.689323988750424,\n        lng: -63.56305193156005,\n        photos: [\"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"]\n      }];\n      var profiles = [];\n\n      _.forEach(data, function (value) {\n        var location = {\n          lat: value.lat,\n          lng: value.lng\n        };\n        console.log(location);\n        var profile = {\n          id: value.id,\n          name: value.name,\n          age: value.age,\n          photos: value.photos,\n          distance: distanceTo(userLocation, location)\n        };\n        profiles.push(profile);\n      });\n\n      if (profiles.length === data.length) {\n        this.setState({\n          profiles: profiles\n        });\n      }\n    }\n  }, {\n    key: \"handleLike\",\n    value: function handleLike(id, index) {\n      var profiles = this.state.profiles;\n      profiles.splice(index, 1);\n      console.log(profiles);\n      this.setState({\n        profiles: profiles\n      });\n    }\n  }, {\n    key: \"handleAuth\",\n    value: function handleAuth() {\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n        var token = result.credential.accessToken; // The signed-in user info.\n\n        var user = result.user;\n        console.log(user); // ...\n      }).catch(function (error) {\n        // Handle Errors here.\n        console.log(error);\n        var errorCode = error.code;\n        var errorMessage = error.message; // The email of the user's account used.\n\n        var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n        var credential = error.credential; // ...\n      });\n    }\n  }, {\n    key: \"handleActive\",\n    value: function handleActive(activeEnd) {\n      var activeStart = moment.format('HHmm');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(AppWrapper, null, React.createElement(\"span\", {\n        onClick: function onClick() {\n          return _this2.handleAuth();\n        }\n      }, \"Log in with Facebook\"));\n    }\n  }]);\n\n  return Index;\n}(Component);\n\nexport default Index;","map":{"version":3,"sources":["/Users/Chris/eggplant/pages/index.js"],"names":["React","Component","styled","posed","distanceTo","_","firebase","base","moment","AppBar","AppWrapper","div","provider","auth","FacebookAuthProvider","addScope","Index","props","state","profiles","user","isAuthed","navigator","geolocation","getCurrentPosition","position","processProfiles","coords","latitude","longitude","bind","alert","lat","lng","userLocation","data","id","name","age","photos","forEach","value","location","console","log","profile","distance","push","length","setState","index","splice","signInWithPopup","then","result","token","credential","accessToken","catch","error","errorCode","code","errorMessage","message","email","activeEnd","activeStart","format","handleAuth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport posed from 'react-pose'\nimport { distanceTo } from 'geolocation-utils'\nimport _ from 'lodash'\nimport firebase from 'firebase'\nimport 'firebase/auth'\nimport base from '../rebase'\nimport moment from 'moment'\n\nimport AppBar from '../components/AppBar'\n\nconst AppWrapper = styled.div`\n  font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;\n`;\n\nvar provider = new firebase.auth.FacebookAuthProvider();\nprovider.addScope('user_birthday')\nprovider.addScope('default')\nprovider.addScope('user_gender')\n\nclass Index extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      profiles: [],\n      user: {},\n      isAuthed: true,\n    }\n  }\n\n  componentDidMount() {\n    if (navigator) {\n      navigator.geolocation.getCurrentPosition(function(position) {\n        this.processProfiles(position.coords.latitude, position.coords.longitude);\n      }.bind(this))\n    } else {\n      alert('location disabled')\n    }\n  }\n\n  processProfiles(lat, lng) {\n    const userLocation = {\n      lat,\n      lng\n    }\n    const data = [\n      {\n        id: '23sdfa4qgsfd',\n        name: 'Emma',\n        age: 22,\n        lat: 44.703664811708066,\n        lng: -63.5526466369629,\n        photos: [\n          \"https://images.unsplash.com/photo-1504703395950-b89145a5425b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\",\n          \"https://images.unsplash.com/photo-1520466809213-7b9a56adcd45?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"\n        ]\n      },\n      {\n        id: '243tregdfgwsd',\n        name: 'Fiona',\n        age: 20,\n        lat: 44.689323988750424,\n        lng: -63.56305193156005,\n        photos: [\n          \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"\n        ]\n      },\n      {\n        id: '46756edhgfgh4',\n        name: 'Kelly',\n        age: 26,\n        lat: 44.689323988750424,\n        lng: -63.56305193156005,\n        photos: [\n          \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\"\n        ]\n      },\n    ]\n    let profiles = []\n    _.forEach(data, function(value) {\n      const location = {\n        lat: value.lat,\n        lng: value.lng\n      }\n      console.log(location);\n      const profile = {\n        id: value.id,\n        name: value.name,\n        age: value.age,\n        photos: value.photos,\n        distance: distanceTo(userLocation, location)\n      }\n      profiles.push(profile)\n    })\n    if (profiles.length === data.length) {\n      this.setState({\n        profiles\n      })\n    }\n  }\n\n  handleLike(id, index) {\n    let {profiles} = this.state\n    profiles.splice(index, 1)\n    console.log(profiles);\n    this.setState({\n      profiles\n    })\n  }\n\n  handleAuth() {\n    firebase.auth().signInWithPopup(provider).then(function(result) {\n      // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n      var token = result.credential.accessToken;\n      // The signed-in user info.\n      var user = result.user;\n      console.log(user);\n      // ...\n    }).catch(function(error) {\n      // Handle Errors here.\n      console.log(error);\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n      // ...\n    });\n  }\n\n  handleActive(activeEnd) {\n    let activeStart = moment.format('HHmm')\n  }\n\n  render() {\n    return (\n      <AppWrapper>\n        <span onClick={() => this.handleAuth()}>Log in with Facebook</span>\n      </AppWrapper>\n    );\n  }\n\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}